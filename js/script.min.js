"use strict";const baseurl="/kitty-rants/",categories={"Kingdom Hearts":"An inconsistent chronicle on an inconsistent series of games"},rants=[{title:"Birth by Sleep, part 1",file:"kh-bbs-p1.md",uri:"birth-by-sleep-part-1",category:"Kingdom Hearts",description:"The beginning of Birth by Sleep and my first forray into the part of the series I've no prior experience with. Excitement and confusion abounds!",date:new Date("2022-09-08")},{title:"Birth by Sleep, part 2",file:"kh-bbs-p2.md",uri:"birth-by-sleep-part-2",category:"Kingdom Hearts",description:"Getting into Ventus's part of the game and properly finding my bearings mechanically while floundering to come to grips with the metaphysics",date:new Date("2022-09-12")},{title:"Birth by Sleep, part 3",file:"kh-bbs-p3.md",uri:"birth-by-sleep-part-3",category:"Kingdom Hearts",description:"Making my way through Aqua's story, the last third of the main game. The usual mixture of things I like and things that greatly baffle me ensue",date:new Date("2022-09-16")},{title:"Birth by Sleep, part 4",file:"kh-bbs-p4.md",uri:"birth-by-sleep-part-4",category:"Kingdom Hearts",description:"Rounding out the Birth by Sleep playthrough with a lethal dosage of grinding to get the secret ending and sharing my overall thoughts of the game",date:new Date("2022-09-29")},{title:"Re:Coded, part 1",file:"kh-rc-p1.md",uri:"re-coded-part-1",category:"Kingdom Hearts",description:"The series reaches new heights in terms of bizarre narrative decisions and ludicrous world-building. Give it up for Re:Coded everyone!",date:new Date("2022-10-02")},{title:"Re:Coded, part 2",file:"kh-rc-p2.md",uri:"re-coded-part-2",category:"Kingdom Hearts",description:"The exciting conclusion to this not-quite-a-movie and the introduction of the plot point that originally killed my interest in the series for about ten years!",date:new Date("2022-10-08")},{title:"Dream Drop Distance, part 1",file:"kh-ddd-p1.md",uri:"dream-drop-distance-part-1",category:"Kingdom Hearts",description:"Once more, I find myself overwhelmed by strange new mechanics in this next handheld entry in the series which features a constant ticking clock element!",date:new Date("2022-10-08 12:00:00")},{title:"Dream Drop Distance, part 2",file:"kh-ddd-p2.md",uri:"dream-drop-distance-part-2",category:"Kingdom Hearts",description:"Two relatively short updates, covering only the Hunchback of Notre Dame world from both Sora's and Riku's perspectives",date:new Date("2022-10-11")},{title:"Dream Drop Distance, part 3",file:"kh-ddd-p3.md",uri:"dream-drop-distance-part-3",category:"Kingdom Hearts",description:"I cover everything leading up to the last world only to stop the update short before what I was actually going to talk about to temporarily save my sanity",date:new Date("2022-11-02")},{title:"Dream Drop Distance, part 4",file:"kh-ddd-p4.md",uri:"dream-drop-distance-part-4",category:"Kingdom Hearts",description:"This it is, the actual moment Kingdom Hearts truly snaps and breaks off into utter nonsense, locking itself into what would eventually become Kingdom Hearts III",date:new Date("2022-11-07")},{title:"Kingdom Hearts 0.2",file:"kh-02.md",uri:"kingdom-hearts-02",category:"Kingdom Hearts",description:"A short and sweet return to relative normalcy after the spiraling insanity of everything that's been happening since Kingdom Hearts II",date:new Date("2022-11-14")},{title:"Kingdom Hearts χ, part 1",file:"kh-chi-p1.md",uri:"kingdom-hearts-chi-part-1",category:"Kingdom Hearts",description:"Here is my attempt at building a tower from the pile of sand that is the story of the first iteration of Kingdom Hearts χ and Back Cover",date:new Date("2022-11-20")},{title:"Kingdom Hearts χ, part 2",file:"kh-chi-p2.md",uri:"kingdom-hearts-chi-part-2",category:"Kingdom Hearts",description:"Things somehow get simultaneously both more and less clear as we go on as the story sees how many mystery boxes it can juggle at once",date:new Date("2022-12-14")},{title:"Kingdom Hearts III, part 1",file:"kh-3-p1.md",uri:"kingdom-hearts-iii-part-1",category:"Kingdom Hearts",description:"The playthrough project finally reaches the infamous third numbered entry of the series and the quest to figure out what went wrong begins",date:new Date("2023-03-01")},{title:"Kingdom Hearts III, part 2",file:"kh-3-p2.md",uri:"kingdom-hearts-iii-part-2",category:"Kingdom Hearts",description:"The extent of the disapointment is laid bare at last and an attempt is made at the impossible task of drawing some kind of conclusion from it all",date:new Date("2023-03-30")}];function updateMeta(e){const t=(e.title?e.title+" | ":"")+"Kitty Rants";if(document.title=t,document.head.querySelector('meta[property="og:title"]').content=t,document.head.querySelector('meta[property="og:description"]').content=e.description??"A dumping ground for reckless verbiage and confused babblings",document.head.querySelector('meta[property="og:type"]').content=e.type??"website",document.head.querySelector('link[rel="canonical"]')?.remove(),document.head.querySelector('meta[property="og:url"]')?.remove(),e.canonical){const t=document.createElement("link");t.rel="canonical",t.href=e.canonical,document.head.appendChild(t);const a=document.createElement("meta");a.setAttribute("property","og:url"),a.content=e.canonical}if(document.head.querySelector('script[type="application/ld+json"]')?.remove(),e.jsonLD){const t=document.createElement("script");t.type="application/ld+json",t.innerHTML=e.jsonLD,document.head.appendChild(t)}}const mainElement=document.querySelector("main"),navElement=document.querySelector("nav"),reducedMotion=!0===matchMedia("(prefers-reduced-motion: reduce)").matches,dtf=new Intl.DateTimeFormat("en-GB",{year:"numeric",month:"long",day:"numeric"});function setPage(e){return new Promise((t=>{if(e===baseurl)return frontPage(),t("frontpage");const a=rants.find((t=>baseurl+t.uri===e));if(!a)return errorPage(),t("error");{const e=new Request(baseurl+"rants/"+a.file);fetch(e).then((e=>{if(!e.ok)return errorPage(),t("error");{document.title=`${a.title} | Kitty Rants`;let r=dtf.format(a.date);const n=a.date.getDate(),i=["th","st","nd","rd"][n>3&&n<21?0:n%10]||"th";r=r.replace(/^(\d+)/,`$1${i} of`);let o=`<article><header><h1>${a.title.replace(/,(.*?)$/," <small>$1</small>")}</h1><p class="timestamp">A ${a.category} rant, written <time datetime="${a.date.toISOString()}">${r}</time></p></header>`;e.text().then((e=>{let r=0;o+=e.trim().replaceAll(/^a>\s(.*)/gm,"<aside><p>$1</p></aside>").replaceAll(/^(#{1,6})\s(.*)/gm,((e,t,a)=>"<section><h"+t.length+">"+a+"</h"+t.length+">")).replaceAll("<section>",(e=>(r++?"</section>":"")+e)).replaceAll(/^([^<\n].*)/gm,"<p>$1</p>").replaceAll(/^<p>(.+?)<\/p>\n{2,}/gm,'<p class="spacer">$1</p>').replaceAll(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replaceAll(/\*(.*?)\*/g,"<em>$1</em>"),r&&(o+="</section>");const n=a.description??e.substring(0,e.lastIndexOf(" ",160)).replaceAll(/^>\s/gm,"").replace(/\*/,"")+"…";updateMeta({title:a.title,description:n,jsonLD:JSON.stringify({"@context":"https://schema.org","@type":"BlogPosting",headline:a.title,url:location.origin+baseurl+a.uri,datePublished:a.date.toISOString(),dateCreated:a.date.toISOString(),description:n,author:[{"@type":"Person",name:"DoomKitty3000",url:"https://github.com/Ashenfactory"}]}),canonical:location.origin+baseurl+a.uri,type:"article"}),o+="</article>";const i=rants.filter((e=>e.category===a.category));if(i.length>1){i.sort(((e,t)=>e.date-t.date));const e=i.findIndex((e=>e.uri===a.uri));o+='<nav class="footer-navigation">',e>0&&(o+=`<a rel="prev" href="${baseurl+i[e-1].uri}"><small>Previous Rant</small><span>${i[e-1].title}</span></a>`),e<i.length-1&&(o+=`<a rel="next" href="${baseurl+i[e+1].uri}"><small>Next Rant</small><span>${i[e+1].title}</span></a>`),o+="</nav>"}return mainElement.innerHTML=`${o}<footer><a class="top-link" href="#top">Back to top?</a></footer>`,t("article")})),navElement.innerHTML=`<ol><li><a href="${baseurl}">Kitty Rants</a></li><li><a href="${baseurl}#${a.category.toLowerCase().replaceAll(" ","-")}">${a.category}</a></li><li aria-current="page">${a.title}</li></ol>`}}))}}))}function errorPage(){updateMeta({title:"Error!"}),navElement.innerHTML=`<ol><li><a href="${baseurl}">Kitty Rants</a></li><li aria-current="page">Error</li></ol>`,mainElement.innerHTML=`<h1>Rant not found!</h1><p>It seems like I've got nothing to say on <em>that</em> matter yet. Or maybe I used to, but then changed my mind later on?</p><p>At any rate, you can try going to the <a href="${baseurl}">frontpage</a> to see if anything there catches your fancy.</p>`}function frontPage(){let e;updateMeta({canonical:location.origin+baseurl}),rants.sort(((e,t)=>e.category.localeCompare(t.category)||t.date-e.date));const t=rants.reduce(((e,t)=>e.date>t.date?e:t));let a=`<h1>Kitty Rants</h1><section><h2>Latest Rant</h2><article><h3><a href="${baseurl+t.uri}">${t.title}</a></h3><time class="timestamp" datetime="${t.date.toISOString()}">${dtf.format(t.date)}</time>${t.description?`<p>${t.description}</p>`:""}</article>`;rants.forEach((t=>{e!==t.category&&(e=t.category,a+=`</section><section id="${e.toLowerCase().replaceAll(" ","-")}"><h2>${e}</h2>`,categories[e]&&(a+=`<p class="lead">${categories[e]}</p>`)),a+=`<article><h3><a href="${baseurl+t.uri}">${t.title}</a></h3><time class="timestamp" datetime="${t.date.toISOString()}">${dtf.format(t.date)}</time>${t.description?`<p>${t.description}</p>`:""}</article>`})),mainElement.innerHTML=`${a}</section><footer><a class="top-link" href="#top">Back to top?</a></footer>`,navElement.innerHTML='<ol><li aria-current="page">Kitty Rants</li></ol>'}function newPage(e,t=null,a=!1){mainElement.classList.add("loading"),setPage(e).then((e=>{a?scroll(0,sessionStorage.getItem("scrollpos")??0):location.hash?setTimeout((()=>{document.querySelector(location.hash)?.scrollIntoView()})):scroll(0,t?.scrollY??0),mainElement.dataset.page=e,mainElement.classList.remove("loading")}))}newPage(location.pathname,null,!0),addEventListener("popstate",((e,t)=>{newPage(location.pathname,e.state)})),document.addEventListener("click",(e=>{"A"===e.target.tagName&&e.target.host===location.host&&(e.preventDefault(),e.target.classList.contains("top-link")?scroll({top:0,left:0,behavior:reducedMotion?"auto":"smooth"}):(history.replaceState({scrollY:scrollY},null,location.href),e.target.pathname!==location.pathname&&(newPage(e.target.pathname),history.pushState(null,null,e.target.href))))})),addEventListener("beforeunload",(()=>{sessionStorage.setItem("scrollpos",scrollY)}));let throttle=!1;addEventListener("scroll",(()=>{throttle||setTimeout((()=>{history.replaceState({scrollY:scrollY},null,location.href),throttle=!1}),250),throttle=!0}));